(self.webpackChunkfind_you_future_app=self.webpackChunkfind_you_future_app||[]).push([[2256],{2256:function(t,e,o){"use strict";o.r(e),o.d(e,{ChangeProfilePicturePageModule:function(){return w}});var i=o(38583),n=o(90665),r=o(19039),a=o(21382),s=o(64762),d=o(39181),p=o(61957),c=o(92340),l=o(64151),u=o(88720),g=o(50806),h=o(20147);function b(t,e){if(1&t&&u._UZ(0,"img",15),2&t){const t=u.oxw();u.s9C("src",t.imageUrl,u.LSH)}}function f(t,e){if(1&t&&u._UZ(0,"img",15),2&t){const t=u.oxw();u.s9C("src",t.uploadedPhotoURL,u.LSH)}}const m=[{path:"",component:(()=>{class t{constructor(t,e,o,i,n,r,a,s,d){this.photo=t,this.router=e,this.profile=o,this.alert=i,this.modal=n,this.toast=r,this.loading=a,this.postEmitter=s,this.singlePostEmitterService=d,this.imageUrl=this.profile.profilePicture.getValue(),this.uploadedPhoto=!1,this.awsPrefix=this.imageUrl.slice(-51),this.BACKEND_URL=c.N.url}ngOnInit(){this.profile.getUserDetails().subscribe(t=>{this.userEmail=t.email,console.log(this.userEmail)})}getFormData(t){return(0,s.mG)(this,void 0,void 0,function*(){const e=document.querySelectorAll("form");yield e.forEach(t=>{"changePhotoForm"===t.id&&(console.log("Got Form: "+t),this.formData=new FormData(t),this.uploadedPhoto=!0)}),console.log(this.formData);let o=new FileReader;if(yield o.addEventListener("load",()=>(0,s.mG)(this,void 0,void 0,function*(){this.uploadedPhotoURL=o.result,console.log("Before cropping: "+o.result),yield this.cropPhoto(this.uploadedPhotoURL)}),!0),e)return o.readAsDataURL(t.target.files[0])})}uploadChangedPhoto(){const t=new FormData;t.append("oldPhotoKey",this.awsPrefix),t.append("email",this.userEmail);const e=new File([this.dataURLtoBlob(this.uploadedPhotoURL)],"picture.png");t.append("profile-picture-update",e),!0===this.uploadedPhoto&&this.photo.changeProfilePicture(t).subscribe(t=>{console.log(t);let e=t.objectUrl;this.presentLoading(),this.profile.profilePicture.next(e),this.presentToast(),this.postEmitter.postPageRefresh(),this.singlePostEmitterService.singlePostPageRefresh(),this.router.navigate(["/home/profile"])})}presentToast(){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:"Your Profile Picture has been changed",animated:!0,cssClass:"updated-toast",duration:2e3})).present()})}presentLoading(){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.loading.create({cssClass:"my-custom-class",message:"Updating Photo...",duration:1e3});yield t.present(),yield t.onDidDismiss(),console.log("Loading dismissed!")})}cropPhoto(t){return(0,s.mG)(this,void 0,void 0,function*(){const e=yield this.modal.create({component:l.W,cssClass:"image-cropper",componentProps:{uploadedPhotoURL:t}});yield e.present(),e.onDidDismiss().then(t=>{this.uploadedPhotoURL=t.data})})}dataURLtoBlob(t){let e=t.split(","),o=e[0].match(/:(.*?);/)[1],i=atob(e[1]),n=i.length,r=new Uint8Array(n);for(;n--;)r[n]=i.charCodeAt(n);return new Blob([r],{type:o})}goBack(){this.router.navigate(["/home/profile"])}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(p.T),u.Y36(a.F0),u.Y36(d.H),u.Y36(r.Br),u.Y36(r.IN),u.Y36(r.yF),u.Y36(r.HT),u.Y36(g.p),u.Y36(h.U))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-change-profile-picture"]],decls:30,vars:3,consts:[[1,"ion-hide-lg-up"],["slot","start"],[1,"ion-text-center"],[1,"ion-hide-lg-down","ion-justify-content-center",2,"padding-top","80px","margin-bottom","40px"],["size-xs","11","size-sm","10","size-md","10","size-lg","8","size-xl","6"],[1,"desktop-toolbar"],["slot","end"],[1,"back-button",3,"click"],[1,"ion-justify-content-center"],["size-xs","12","size-sm","10","size-md","8","size-lg","6","size-xl","4"],[1,"text-header"],["id","profile-picture","alt","Profile Picture",3,"src",4,"ngIf"],["id","changePhotoForm",3,"ngSubmit"],["name","profile-picture-update","placeholder","Upload Image","type","file",3,"change"],["type","submit",1,"orange-button",3,"disabled"],["id","profile-picture","alt","Profile Picture",3,"src"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-header",0),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",1),u._UZ(3,"ion-back-button"),u.qZA(),u.TgZ(4,"ion-title"),u._uU(5,"Change Profile Picture"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"ion-content",2),u.TgZ(7,"ion-grid"),u.TgZ(8,"ion-row",3),u.TgZ(9,"ion-col",4),u.TgZ(10,"ion-toolbar",5),u.TgZ(11,"ion-buttons",1),u.TgZ(12,"h1"),u._uU(13,"Change Profile Picture"),u.qZA(),u.qZA(),u.TgZ(14,"ion-buttons",6),u.TgZ(15,"ion-button",7),u.NdJ("click",function(){return e.goBack()}),u._uU(16," Back "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"ion-row",8),u.TgZ(18,"ion-col",9),u.TgZ(19,"h6",10),u._uU(20,"Please select the profile picture you will use to replace your current one. Only pictures with the extentions "),u.TgZ(21,"span"),u._uU(22,"'.png', '.jpg', and '.jpeg'"),u.qZA(),u._uU(23," are allowed. "),u.qZA(),u.YNc(24,b,1,1,"img",11),u.YNc(25,f,1,1,"img",11),u.TgZ(26,"form",12),u.NdJ("ngSubmit",function(){return e.uploadChangedPhoto()}),u.TgZ(27,"input",13),u.NdJ("change",function(t){return e.getFormData(t)}),u.qZA(),u.TgZ(28,"ion-button",14),u._uU(29,"Update "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(24),u.Q6J("ngIf",!e.uploadedPhoto),u.xp6(1),u.Q6J("ngIf",e.uploadedPhoto),u.xp6(3),u.Q6J("disabled",!e.imageUrl))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,r.jY,r.Nd,r.wI,r.YG,i.O5,n._Y,n.JL,n.F],styles:[".desktop-toolbar[_ngcontent-%COMP%]{--background:none;padding-bottom:16px;border-bottom:1px solid #33333326}.desktop-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0055a5}.back-button[_ngcontent-%COMP%]{--color:#fff;--background:#0055a5;--background-hover:linear-gradient(#0055a5,#0d2e4d);height:24px;--border-radius:5px;width:100px;font-size:.5em;font-weight:600;display:block}#profile-picture[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:100px;margin:50px auto;display:block;opacity:0;border:2px solid #005191;-webkit-animation:pic-slide-right .5s cubic-bezier(.175,.885,.32,1.275) .5s forwards;animation:pic-slide-right .5s cubic-bezier(.175,.885,.32,1.275) .5s forwards}.orange-button[_ngcontent-%COMP%]{width:unset;display:block;margin:40px auto;width:200px}.blue-button[_ngcontent-%COMP%]{width:200px}.skip-button[_ngcontent-%COMP%]{display:block;--background:none;color:#888;--border-color:#888;--border-width:3px;--border-style:solid;width:200px;margin:40px auto;opacity:.5}.blue-button[_ngcontent-%COMP%], .skip-button[_ngcontent-%COMP%]{-webkit-animation:none;animation:none}.blue-button[_ngcontent-%COMP%]{width:unset;opacity:unset}.wrapper[_ngcontent-%COMP%]{box-shadow:1px 1px 10px rgba(0,0,0,.1);height:auto;padding:50px}#default-picture-wrapper[_ngcontent-%COMP%]{height:100px;width:100px;margin:20px auto 50px;border-radius:50px;background-image:url(default-pro-picture.5289221102b9ba5395fe.svg);opacity:0;-webkit-animation:slide-up .5s cubic-bezier(.175,.885,.32,1) .5s forwards;animation:slide-up .5s cubic-bezier(.175,.885,.32,1) .5s forwards}#upload-picture-wrapper[_ngcontent-%COMP%]{height:100px;width:100px;border:4px solid #005191;margin:0 auto 50px;border-radius:50px;-webkit-animation:slide-up .5s cubic-bezier(.175,.885,.32,1.275) .5s forwards;animation:slide-up .5s cubic-bezier(.175,.885,.32,1.275) .5s forwards}span[_ngcontent-%COMP%]{color:#ffb351;font-weight:600;background:#999;padding:6px;line-height:1.5em;border-radius:5px}#next-button[_ngcontent-%COMP%]{width:100%;height:60px;background:#d3d3d3;position:absolute;bottom:0;font-size:1em}.cancel-button[_ngcontent-%COMP%]{color:#e4405f;--background:none;--background-hover:none;height:50px;width:200px;box-shadow:1px 1px 10px rgba(0,0,0,.1);transition:.5s;transition-timing-function:cubic-bezier(.175,.885,.32,1.275)}.cancel-button[_ngcontent-%COMP%]:hover{box-shadow:1px 1px 10px rgba(0,0,0,.4)}.camera-button[_ngcontent-%COMP%]{--background:#fff;--color:#005191;--border-style:solid;--border-width:1px;--border-color:#005191;border:1px;margin:30px auto}input[type=file][_ngcontent-%COMP%]{color:#fff;font-size:1.2em;font-weight:600;border:1px solid #005191;background:linear-gradient(#0672c4,#005191);width:400px;height:50px;border-radius:5px;padding:20px 0 0 20px;text-align:center;cursor:pointer}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{visibility:hidden}#img-wrapper[_ngcontent-%COMP%]{height:150px;width:150px;margin:50px auto}@-webkit-keyframes lide-up{0%{transform:translateY(100px)}to{transform:translateY(0);opacity:1}}@keyframes lide-up{0%{transform:translateY(100px)}to{transform:translateY(0);opacity:1}}"]}),t})()},{path:"confirm",loadChildren:()=>o.e(5597).then(o.bind(o,15597)).then(t=>t.ConfirmPageModule)}];let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[a.Bz.forChild(m)],a.Bz]}),t})();var P=o(63078);let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[i.ez,n.u5,r.Pc,x,P.ImageCropperPageModule]]}),t})()}}]);