{"version":3,"file":"src_app_pages_profile_resume_update-resume_update-resume_module_ts.js","mappings":"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","sources":["./src/app/pages/profile/resume/update-resume/update-resume-routing.module.ts","./src/app/pages/profile/resume/update-resume/update-resume.module.ts","./src/app/pages/profile/resume/update-resume/update-resume.page.ts","./src/app/services/resume.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UpdateResumePage } from './update-resume.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UpdateResumePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UpdateResumePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UpdateResumePageRoutingModule } from './update-resume-routing.module';\n\nimport { UpdateResumePage } from './update-resume.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    UpdateResumePageRoutingModule\n  ],\n  declarations: [UpdateResumePage]\n})\nexport class UpdateResumePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ProfileService } from '../../../../services/profile.service';\nimport { ResumeService } from '../../../../services/resume.service';\nimport { AlertController, ToastController, LoadingController } from '@ionic/angular';\n\n\n\n@Component({\n  selector: 'app-update-resume',\n  templateUrl: './update-resume.page.html',\n  styleUrls: ['./update-resume.page.scss'],\n})\nexport class UpdateResumePage implements OnInit {\n\n  formData: FormData;\n  uploadedResume: boolean;\n  userProPicUrl = this.profile.resume.getValue();\n  awsPrefix = this.userProPicUrl.slice(-51);\n  uploadedPhotoURL: string | ArrayBuffer;\n  userEmail: string;\n\n\n  constructor(\n    private resume: ResumeService,\n    private router: Router,\n    private profile: ProfileService,\n    private alert: AlertController,\n    private toast: ToastController,\n    private loading: LoadingController) { }\n\n  ngOnInit() {\n    this.profile.getUserDetails()\n      .subscribe(\n        data => {\n          this.userEmail = data['email'];\n          console.log(this.userEmail);\n        }\n      );\n  }\n\n  goBack() {\n    this.router.navigate(['/home/profile/view-resume']);\n  }\n\n  getFormData(event) {\n    const formElement = document.querySelectorAll('form');\n    formElement.forEach(form => {\n     if ( form.id === 'changeResumeForm') {\n       console.log('Got Form: ' + form);\n       this.formData = new FormData(form);\n       this.uploadedResume = true;\n     }\n    });\n\n    console.log(this.formData);\n\n    let reader = new FileReader();\n    reader.addEventListener('load',  () => {\n      // convert image file to base64 string\n      this.uploadedPhotoURL = reader.result;\n    }, false);\n\n    if (formElement) {\n      reader.readAsDataURL(event.target.files[0]);\n    }\n  }\n\n  uploadResume() {\n    const formElement = document.querySelectorAll('form');\n    formElement.forEach(form => {\n     if ( form.id === 'changeResumeForm') {\n       console.log('Got Form: ' + form);\n       this.formData = new FormData(form);\n       this.formData.append('oldResumeKey', this.awsPrefix);\n       this.formData.append('email', this.userEmail);\n     }\n    });\n\n    this.resume.changeResume(this.formData).subscribe(\n       async data => {\n         console.log(data);\n         let newResume = data['objectUrl'];\n         console.log(newResume);\n         await this.presentLoading();\n         await this.profile.resume.next(newResume);\n         await this.presentToast();\n         await this.router.navigate(['/home/profile/view-resume']);\n       }\n     );\n   }\n\n   async presentToast() {\n    const toast = await this.toast.create({\n      message: 'Your Resume has been changed',\n      animated: true,\n      cssClass: 'updated-toast',\n      duration: 2000\n    });\n    toast.present();\n  }\n\n  async presentLoading() {\n    const loading = await this.loading.create({\n      cssClass: 'my-custom-class',\n      message: 'Updating Resume...',\n      duration: 1000\n    });\n    await loading.present();\n\n    const { role, data } = await loading.onDidDismiss();\n    console.log('Loading dismissed!');\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { environment } from '../../environments/environment';\nimport { tap, catchError } from 'rxjs/operators';\nimport { ToastController } from '@ionic/angular';\nimport { AuthService } from './auth.service';\nimport { Router } from '@angular/router';\n\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class ResumeService {\n\n  BACKEND_URL = environment.url;\n\n  constructor(\n    private http: HttpClient,\n    private toast: ToastController,\n    private auth: AuthService,\n    private router: Router\n  ) {\n\n  }\n  resumeUpload(resumeForm) {\n    console.log('resume uploading');\n    return this.http.post(`${this.BACKEND_URL}/api/resume/upload-resume`,\n    resumeForm).pipe(\n      tap(),\n      catchError(e => {\n        console.log(e.error.msg)\n        if (e.error.msg === 'File needs to be a .pdf file') {\n          this.wrongFileTypeToast('Resume needs to be a .pdf file.');\n          return e;\n        }\n      })).subscribe(\n        data => {\n          console.log(data['objectUrl']);\n          return this.goToCredentialsPage(data['objectUrl']);\n        });\n   }\n   async wrongFileTypeToast(msg) {\n    const toast = await this.toast.create({\n      message: msg,\n      duration: 2000,\n      cssClass: 'danger-toast',\n    });\n    toast.present();\n  }\n  goToCredentialsPage(resume) {\n    this.auth.getResume(resume);\n    console.log('Going to Credentials Page');\n    this.router.navigate(['/personal-info/profile-picture/upload-resume/login-credentials']);\n  }\n   changeResume(imageForm) {\n    console.log(imageForm);\n    return this.http.post(`${this.BACKEND_URL}/api/resume/change-resume`,\n    imageForm);\n   }\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}