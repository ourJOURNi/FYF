{"version":3,"file":"src_app_pages_posts_following_following_module_ts.js","mappings":"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","sources":["./src/app/pages/posts/following/following-routing.module.ts","./src/app/pages/posts/following/following.module.ts","./src/app/pages/posts/following/following.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FollowingPage } from './following.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FollowingPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FollowingPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CustomComponentsModule } from '../../../components/custom-component.module';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FollowingPageRoutingModule } from './following-routing.module';\n\nimport { FollowingPage } from './following.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    CustomComponentsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    FollowingPageRoutingModule\n  ],\n  declarations: [FollowingPage]\n})\nexport class FollowingPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { PostsService } from '../../../services/post.service';\nimport { ProfileService } from 'src/app/services/profile.service';\nimport { ToastController, ModalController } from '@ionic/angular';\nimport { format } from 'date-fns';\nimport { formatDistanceToNow } from 'date-fns';\nimport { FollowIconComponent } from '../../../components/follow-icon/follow-icon.component';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { PostPageEmitterService } from 'src/app/emitters/post-page-emitter.service';\nimport { PlatformLocation } from '@angular/common';\n\n\n@Component({\n  selector: 'app-following',\n  templateUrl: './following.page.html',\n  styleUrls: ['./following.page.scss'],\n})\nexport class FollowingPage implements OnInit {\n\n  commentForm: FormGroup;\n  showShortDesciption = true\n  userEmail;\n  userFullName;\n  userProfilePicture;\n  date;\n  allFollowedPosts = [];\n  userID;\n\n  constructor(\n    private router: Router,\n    public posts: PostsService,\n    private profile: ProfileService,\n    private toast: ToastController,\n    private formBuilder: FormBuilder,\n    private eventEmitterService: PostPageEmitterService,\n    private modal: ModalController,\n    private location: PlatformLocation\n  ) { }\n\n  ngOnInit() {\n    this.location.onPopState(() => {\n      this.eventEmitterService.onBackAction();\n    });\n\n    // Get the User's Followed Posts\n    this.profile.getUserDetails().subscribe(\n      details => {\n        console.log('User ID from Following Page OnInit');\n        this.userID = details['_id'];\n        this.userFullName = details['fullName'];\n        this.userEmail = details['email'];\n        this.userProfilePicture = details['profilePicture'];\n        this.posts.getFollowedPost(this.userID).subscribe(\n          data => {\n            this.allFollowedPosts = Object.values(data).reverse();\n            console.log(data);\n\n            for (const post of this.allFollowedPosts) {\n              post.date = format( new Date(post.date), 'MMMM do, yyyy');\n            }\n\n            return this.allFollowedPosts;\n          }\n        );\n      });\n\n    console.log('Got Followed Posts');\n\n      // To collect comment data\n    this.commentForm = this.formBuilder.group({\n      comment: ['']\n    });\n  }\n  alterDescriptionText() {\n  this.showShortDesciption = !this.showShortDesciption\n  }\n  postPage(post) {\n    // tslint:disable-next-line: max-line-length\n    this.router.navigate(['/home/posts/post-page', post._id]);\n  }\n  addPost() {\n    this.router.navigate(['/home/posts/add-post']);\n  }\n  back() {\n    this.eventEmitterService.onBackAction();\n    this.router.navigate(['/home/posts']);\n  }\n  async comment(postID, userFullName, userEmail, userProfilePicture, comment) {\n\n    // Reset Comment Input\n    this.commentForm.reset();\n    const date = await Date.now();\n    console.log('Posting comment');\n    console.log('Post ID: ' + postID);\n\n    await this.posts.comment(\n      postID,\n      this.userFullName,\n      this.userEmail,\n      this.userProfilePicture,\n      comment\n    ).subscribe(\n      () => {this.posts.getPostInfo(postID).subscribe(\n        post => {\n          this.posts.getPostInfo(postID).subscribe(\n           post => {\n             for (let postComments of post['comments']) {\n\n               console.log(postComments);\n\n               postComments.isUser = false;\n               postComments.canDeleteComment = false;\n               postComments.canReport = true;\n\n                 // If this comment is from the logged in user, they can delete and edit\n               if (postComments.userEmail === this.userEmail) {\n                   postComments.isUser = true;\n                   postComments.canDeleteComment = true;\n                   postComments.canReport = false;\n                 }\n\n               postComments.repliesLength = postComments.replies.length;\n               postComments.date = formatDistanceToNow( new Date(postComments.date), {\n                 includeSeconds: true,\n                 addSuffix: false\n               });\n              }\n             this.posts.commentsSubject$.next(post['comments'].reverse());\n           });\n        });\n      }\n    );\n\n    await this.posts.getPostInfo(postID).subscribe(\n      post => {\n        for (let postComments of post['comments']) {\n          postComments.date = formatDistanceToNow( new Date(postComments.date), {\n            includeSeconds: true,\n            addSuffix: true\n          });\n         }\n        this.posts.commentsSubject$.next(post['comments'].reverse());\n      }\n    );\n\n    const toast = this.toast.create({\n      message: 'Your comment has been added.',\n      duration: 1500\n    });\n\n    toast.then(toast => toast.present());\n\n    await this.router.navigate(['/home/posts/post-page', postID]);\n  }\n  async doRefresh(event) {\n\n     // Get the User's Followed Posts\n     this.profile.getUserDetails().subscribe(\n      details => {\n        console.log('User ID from Following Page OnInit');\n        this.userID = details['_id'];\n        this.userFullName = details['fullName'];\n        this.userEmail = details['email'];\n        this.userProfilePicture = details['profilePicture'];\n        this.posts.getFollowedPost(this.userID).subscribe(\n          data => {\n            this.allFollowedPosts = Object.values(data).reverse();\n            console.log(data);\n\n            for (const post of this.allFollowedPosts) {\n              post.date = format( new Date(post.date), 'MMMM do, yyyy');\n            }\n\n            return this.allFollowedPosts;\n          }\n        );\n      });\n\n    // Present Toast\n    await setTimeout(() => {\n      const toast = this.toast.create({\n        message: 'Inspiration Page has been refreshed',\n        duration: 3000\n      });\n      event.target.complete();\n      toast.then(toast => toast.present());\n    }, 2000);\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}