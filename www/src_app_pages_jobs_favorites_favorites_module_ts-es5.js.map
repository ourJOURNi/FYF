{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,UAAMA,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAEC;AAFb,OADqB,CAAvB;;UAWaC,2BAA0B;AAAA;AAAA;;AAA1BA,iCAA0B,uDAJtC,yDAAS;AACRC,eAAO,EAAE,CAACC,mEAAsBN,MAAtB,CAAD,CADD;AAERO,eAAO,EAAE,CAACD,yDAAD;AAFD,OAAT,CAIsC,GAA1BF,2BAA0B,CAA1B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCMAI,oBAAmB;AAAA;AAAA;;AAAnBA,0BAAmB,uDAV/B,yDAAS;AACRH,eAAO,EAAE,CACPI,yDADO,EAEPC,uDAFO,EAGPC,uDAHO,EAIPC,iFAJO,EAKPC,uFALO,CADD;AAQRC,oBAAY,EAAE,CAACC,0DAAD;AARN,OAAT,CAU+B,GAAnBP,oBAAmB,CAAnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCPAQ,cAAa;AAQxB,+BACUC,MADV,EAEUC,SAFV,EAGUC,OAHV,EAIUC,mBAJV,EAKUC,QALV,EAKoC;AAAA;;AAJ1B;AACA;AACA;AACA;AACA;AACL;;AAdmB;AAAA;AAAA,iBAgBxB,uBAAW;AACT;AACA;AACA,iBAAKC,UAAL,CAAgBC,WAAhB;AACD;AApBuB;AAAA;AAAA,iBAsBxB,oBAAQ;AAAA;;AACN,iBAAKF,QAAL,CAAcG,UAAd,CAAyB,YAAK;AAC5B,mBAAI,CAACJ,mBAAL,CAAyBK,YAAzB,GAD4B,CAE5B;;AACD,aAHD,EADM,CAMN;AACA;AACA;;AACA,iBAAKC,eAAL;AACD;AAhCuB;AAAA;AAAA,iBAkCxB,gBAAI;AACF,iBAAKN,mBAAL,CAAyBK,YAAzB;AACA,iBAAKR,MAAL,CAAYU,QAAZ,CAAqB,CAAC,YAAD,CAArB;AACD;AArCuB;AAAA;AAAA,iBAuCxB,2BAAe;AAAA;;AACb;AACA,iBAAKL,UAAL,GAAkB,KAAKH,OAAL,CAAaS,cAAb,GAA8BC,SAA9B,CAAyC,cAAI,EAAG;AAChE,oBAAI,CAACC,SAAL,GAAiBC,IAAI,CAAC,OAAD,CAArB,CADgE,CAEhE;AACA;AACA;AAEA;;AACA,oBAAI,CAACb,SAAL,CAAec,aAAf,CAA6BH,SAA7B,CACE,cAAI,EAAG;AACLI,uBAAO,CAACC,GAAR,qCAAyCC,IAAzC;AACA,sBAAI,CAACC,YAAL,GAAoB,MAAI,CAAClB,SAAL,CAAemB,YAAf,CAA4B,MAAI,CAACP,SAAjC,EAA4CD,SAA5C,CAAuD,oBAAU,EAAG;AACtF,wBAAI,CAACS,eAAL,GAAuBC,UAAvB;AACAN,yBAAO,CAACC,GAAR,CAAY,gBAAZ;AACAD,yBAAO,CAACC,GAAR,CAAYK,UAAZ;;AACA,sBAAG,MAAI,CAACD,eAAL,CAAqBE,MAArB,IAA+B,CAAlC,EAAqC;AACnCP,2BAAO,CAACC,GAAR,CAAY,QAAZ;AACA,0BAAI,CAACO,WAAL,GAAmB,IAAnB;AACD,mBAHD,MAGO;AACL,0BAAI,CAACA,WAAL,GAAmB,KAAnB;AACD;;AATqF,6DAUpE,MAAI,CAACH,eAV+D;AAAA;;AAAA;AAUtF,wEAAwC;AAAA,0BAA7BI,GAA6B;AACtCA,yBAAG,CAACC,WAAJ,GAAkB,sDAAqB,IAAIC,IAAJ,CAASF,GAAG,CAACC,WAAb,CAArB,EAAgD;AAAEE,iCAAS,EAAE;AAAb,uBAAhD,CAAlB;AACD;AAZqF;AAAA;AAAA;AAAA;AAAA;AAavF,iBAbmB,CAApB;AAcD,eAjBH;AAmBD,aA1BiB,CAAlB;AA2BD;AApEuB;AAAA;AAAA,iBAsExB,iBAAQH,GAAR,EAAW;AACTT,mBAAO,CAACC,GAAR,CAAYQ,GAAZ;AACAT,mBAAO,CAACC,GAAR,CAAY,4BAAZ,EAFS,CAGT;AACA;;AACA,iBAAKjB,MAAL,CAAYU,QAAZ,CAAqB,CAAC,qBAAD,EAAwBe,GAAG,CAACI,GAA5B,EAAiCJ,GAAG,CAACK,KAArC,EAA4CL,GAAG,CAACM,WAAhD,EAA6DN,GAAG,CAACO,YAAjE,EAA+EP,GAAG,CAACQ,OAAnF,EAA4FR,GAAG,CAACS,kBAAhG,EAAoHT,GAAG,CAACU,SAAxH,CAArB;AACAnB,mBAAO,CAACC,GAAR,CAAYQ,GAAG,CAACW,IAAhB;AACD;AA7EuB;AAAA;AAAA,iBA+ExB,2BAAe;AACbpB,mBAAO,CAACC,GAAR,CAAY,uBAAZ;AACD;AAjFuB;;AAAA;AAAA;;;;gBAdjBoB;;gBACAC;;gBACAC;;gBAEAC;;gBACAC;;;;AASI1C,oBAAa,uDALzB,0DAAU;AACT2C,gBAAQ,EAAE,eADD;AAETC,6KAFS;;AAAA,OAAV,CAKyB,2EASNN,qDACGC,2EACFC,8EACYC,4GACXC,+DAbI,GAAb1C,cAAa,CAAb;;;;;;;;;;;;;ACfb;;;AAAA6C,uCAAe,yvFAAf;;;;;;;;;;;;;;;","names":["routes","path","component","_favorites_page__WEBPACK_IMPORTED_MODULE_0__","FavoritesPageRoutingModule","imports","_angular_router__WEBPACK_IMPORTED_MODULE_3__","exports","FavoritesPageModule","_angular_common__WEBPACK_IMPORTED_MODULE_5__","_angular_forms__WEBPACK_IMPORTED_MODULE_6__","_ionic_angular__WEBPACK_IMPORTED_MODULE_7__","_favorites_routing_module__WEBPACK_IMPORTED_MODULE_0__","_components_custom_component_module__WEBPACK_IMPORTED_MODULE_1__","declarations","_favorites_page__WEBPACK_IMPORTED_MODULE_2__","FavoritesPage","router","favorites","profile","eventEmitterService","location","profileSub","unsubscribe","onPopState","onBackAction","getFavoriteJobs","navigate","getUserDetails","subscribe","userEmail","data","favoriteJobs$","console","log","favs","favoriteSubs","getFavorites","favoriteJobsObj","favDetails","length","noFavorites","job","dateCreated","Date","addSuffix","_id","title","companyName","companyEmail","summary","fullJobDescription","rateOfPay","name","_angular_router__WEBPACK_IMPORTED_MODULE_6__","_services_favorites_service__WEBPACK_IMPORTED_MODULE_2__","src_app_services_profile_service__WEBPACK_IMPORTED_MODULE_3__","src_app_emitters_favorites_event_emitter_service__WEBPACK_IMPORTED_MODULE_4__","_angular_common__WEBPACK_IMPORTED_MODULE_7__","selector","template","__webpack_exports__"],"sources":["webpack:///src/app/pages/jobs/favorites/favorites-routing.module.ts","webpack:///src/app/pages/jobs/favorites/favorites.module.ts","webpack:///src/app/pages/jobs/favorites/favorites.page.ts","webpack:///src/app/pages/jobs/favorites/favorites.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FavoritesPage } from './favorites.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FavoritesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FavoritesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FavoritesPageRoutingModule } from './favorites-routing.module';\nimport { CustomComponentsModule } from \"../../../components/custom-component.module\";\n\nimport { FavoritesPage } from './favorites.page';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    FavoritesPageRoutingModule,\n    CustomComponentsModule\n  ],\n  declarations: [FavoritesPage]\n})\nexport class FavoritesPageModule {}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router, NavigationStart, ActivatedRoute } from '@angular/router';\nimport { FavoritesService } from '../../../services/favorites.service';\nimport { ProfileService } from 'src/app/services/profile.service';\nimport { formatDistanceToNow } from 'date-fns';\nimport { FavoritesEventEmitterService } from 'src/app/emitters/favorites-event-emitter.service';\nimport { PlatformLocation } from '@angular/common';\nimport { Subscription } from 'rxjs';\n\n\n@Component({\n  selector: 'app-favorites',\n  templateUrl: './favorites.page.html',\n  styleUrls: ['./favorites.page.scss'],\n})\nexport class FavoritesPage implements OnInit, OnDestroy {\n  favoriteJobsObj;\n  userEmail;\n\n  favoriteSubs: Subscription;\n  profileSub: Subscription;\n  noFavorites: boolean;\n\n  constructor(\n    private router: Router,\n    private favorites: FavoritesService,\n    private profile: ProfileService,\n    private eventEmitterService: FavoritesEventEmitterService,\n    private location: PlatformLocation\n  ) { }\n\n  ngOnDestroy(): void {\n    // this.favoriteSubs.unsubscribe();\n    // this.favorites.favoriteJobs$.unsubscribe();\n    this.profileSub.unsubscribe();\n  }\n\n  ngOnInit() {\n    this.location.onPopState(() => {\n      this.eventEmitterService.onBackAction();\n      // this.favorites.getFavorites(this.userEmail);\n    })\n\n    // this.favorites.favoriteJobs$.subscribe(favorites => {\n    //   this.favoriteJobs = Object.values(favorites);\n    // });\n    this.getFavoriteJobs();\n  }\n\n  back() {\n    this.eventEmitterService.onBackAction();\n    this.router.navigate(['/home/jobs']);\n  }\n\n  getFavoriteJobs() {\n    // getting all the favorite jobs that the user has on their profile\n    this.profileSub = this.profile.getUserDetails().subscribe( data => {\n      this.userEmail = data['email'];\n      // this.favoriteJobs = data['favoriteJobs']\n      // console.log('Favorite Jobs:');\n      // console.log(this.favoriteJobs);\n\n      // this.favorites.favoriteJobs$.next(this.favoriteJobs);\n      this.favorites.favoriteJobs$.subscribe(\n        favs => {\n          console.log(`Favorite Jobs in Service: ${favs}`);\n          this.favoriteSubs = this.favorites.getFavorites(this.userEmail).subscribe( favDetails => {\n            this.favoriteJobsObj = favDetails;\n            console.log('Favorite jobs:')\n            console.log(favDetails)\n            if(this.favoriteJobsObj.length == 0) {\n              console.log('wassup');\n              this.noFavorites = true;\n            } else {\n              this.noFavorites = false;\n            }\n            for (const job of this.favoriteJobsObj) {\n              job.dateCreated = formatDistanceToNow( new Date(job.dateCreated), { addSuffix: true });\n            }\n          });\n        }\n      )\n    });\n  }\n\n  jobPage(job) {\n    console.log(job);\n    console.log('Going to specific Job Page');\n    // state object after url has to be an object for navigate()\n    // tslint:disable-next-line: max-line-length\n    this.router.navigate(['/home/jobs/job-page', job._id, job.title, job.companyName, job.companyEmail, job.summary, job.fullJobDescription, job.rateOfPay]);\n    console.log(job.name);\n  }\n\n  favoriteJobPage() {\n    console.log('Going to favorite bad');\n  }\n\n\n}\n","export default \"<ion-header no-border class=\\\"ion-hide-lg-up\\\">\\n  <!-- Mobile & Tablet Toolbar -->\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n      <img height=\\\"30\\\" src=\\\"../../../../assets/icon/jobs-favorites-heart-blue.svg\\\" alt=\\\"\\\" srcset=\\\"\\\">\\n    </ion-buttons>\\n    <ion-title>Favorites</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid>\\n    <!-- Desktop Header -->\\n    <ion-row class=\\\"ion-hide-lg-down ion-justify-content-center\\\">\\n      <ion-col size-xs=\\\"11\\\" size-sm=\\\"10\\\" size-md=\\\"10\\\" size-lg=\\\"8\\\" size-xl=\\\"6\\\">\\n        <ion-toolbar class=\\\"desktop-toolbar\\\">\\n              <ion-buttons slot=\\\"start\\\">\\n                  <img height=\\\"36\\\" src=\\\"../../../../assets/icon/jobs-favorites-heart-white.svg\\\" alt=\\\"Favorites-Icon\\\">\\n                  <h1>Favorites</h1>\\n              </ion-buttons>\\n              <ion-buttons slot=\\\"end\\\">\\n                <ion-button class=\\\"back-button\\\" (click)=\\\"back()\\\">\\n                  Back\\n                </ion-button>\\n              </ion-buttons>\\n        </ion-toolbar>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- No Favorites -->\\n    <ion-row class=\\\"ion-justify-content-center\\\">\\n      <ion-col *ngIf=\\\"noFavorites\\\" size-xs=\\\"11\\\" size-sm=\\\"10\\\" size-md=\\\"10\\\" size-lg=\\\"8\\\" size-xl=\\\"6\\\">\\n        <h1 id=\\\"no-favorites\\\">You have no favorites.</h1>\\n      </ion-col>\\n    </ion-row>\\n\\n    <!-- Favorite Jobs -->\\n    <ion-row class=\\\"ion-justify-content-center\\\">\\n      <ion-col size-xs=\\\"12\\\" size-sm=\\\"10\\\" size-md=\\\"10\\\" size-lg=\\\"8\\\" size-xl=\\\"6\\\">\\n      <ion-row class=\\\"job-section ion-justify-content-center\\\" *ngFor=\\\"let job of favoriteJobsObj\\\">\\n            <ion-col push=\\\"0.3\\\" size=\\\"1\\\">\\n              <img class=\\\"company-logo\\\" src=\\\"{{job.companyLogo}}\\\">\\n            </ion-col>\\n            <ion-col push=\\\"0.3\\\" style=\\\"height: 80px;\\\">\\n              <h5 id=\\\"job-title\\\">{{job.title}}</h5>\\n              <p id=\\\"company-name\\\">{{job.companyName}}</p>\\n              <h5 id=\\\"job-posted-date\\\">Posted: {{job.dateCreated}}</h5>\\n              <h5 id=\\\"job-rate\\\">${{job.rateOfPay}}/hr</h5>\\n            </ion-col>\\n            <ion-col size=\\\"11\\\">\\n              <p id=\\\"job-summary\\\">{{job.summary}}</p>\\n            </ion-col>\\n            <ion-col pull=\\\"0\\\" size=\\\"11\\\">\\n                <!-- Heart Icon Component holds the state for Favorites -->\\n                <app-heart-icon [job]=\\\"job\\\" [favoriteJobs]=\\\"favoriteJobsObj\\\" *ngIf=\\\"favoriteJobsObj\\\"></app-heart-icon>\\n                <ion-button class=\\\"job-details ion-float-right\\\" (click)=\\\"jobPage(job)\\\">\\n                  Details\\n                </ion-button>\\n            </ion-col>\\n      </ion-row>\\n    </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\";"]}