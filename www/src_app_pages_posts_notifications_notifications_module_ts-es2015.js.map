{"version":3,"file":"src_app_pages_posts_notifications_notifications_module_ts-es2015.js","mappings":"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","sources":["./src/app/pages/posts/notifications/notifications-routing.module.ts","./src/app/pages/posts/notifications/notifications.module.ts","./src/app/pages/posts/notifications/notifications.page.ts","./src/app/pages/posts/notifications/notifications.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NotificationsPage } from './notifications.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NotificationsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NotificationsPageRoutingModule } from './notifications-routing.module';\n\nimport { NotificationsPage } from './notifications.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NotificationsPageRoutingModule\n  ],\n  declarations: [NotificationsPage]\n})\nexport class NotificationsPageModule {}\n","import { Component, OnInit, OnDestroy} from '@angular/core';\nimport { NotificationsService } from 'src/app/services/notifications.service';\nimport { ProfileService } from 'src/app/services/profile.service';\nimport { formatDistanceToNow } from 'date-fns';\nimport { Subscription } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { ToastController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-notifications',\n  templateUrl: './notifications.page.html',\n  styleUrls: ['./notifications.page.scss'],\n})\nexport class NotificationsPage implements OnInit, OnDestroy {\n  userEmail;\n  allNotifications;\n  noNotifications = false;\n  initSub: Subscription;\n  notificationsSub: Subscription;\n\n  constructor(\n    private notifications: NotificationsService,\n    private profile: ProfileService,\n    private toast: ToastController,\n    private router: Router\n  ) { }\n\n  ngOnDestroy() {\n    this.notificationsSub.unsubscribe();\n  }\n  ngOnInit() {\n    this.initSub = this.profile.getUserDetails()\n      .subscribe(\n        userDetails => {\n          this.userEmail = userDetails['email'];\n          this.notificationsSub = this.notifications.getNotifications(this.userEmail)\n            .subscribe(\n              notifications => {\n                  console.log(notifications);\n                  this.allNotifications = Object.values(notifications);\n                  // Track if No Notifications\n                  if (this.allNotifications.length <= 0 || this.allNotifications === []) {\n                    this.noNotifications = true;\n                  } else {\n                    this.noNotifications = false;\n                  }\n                  this.notifications.notifications$.next(Object.values(notifications));\n                  this.notifications.notifications$.subscribe( data => {\n                    for (let n of this.allNotifications) {\n                    n.date = formatDistanceToNow( new Date(n.date), {\n                      includeSeconds: true,\n                      addSuffix: false\n                    });\n                    this.allNotifications = Object.values(notifications);\n                    console.log(this.allNotifications)\n                  }\n                });\n\n                  // TODO: replaces 'minutes' with M\n                  // let minutes = ;\n                }\n            );\n        }\n      );\n  }\n  clear() {\n    this.notifications.clearNotifications(this.userEmail)\n    .subscribe(\n      data => {\n\n        this.notificationsSub = this.notifications.getNotifications(this.userEmail)\n          .subscribe(\n            notifications => {\n                console.log(notifications);\n                this.notifications.notifications$.next(Object.values(notifications));\n                this.notifications.notifications$.subscribe( data => {\n                  this.allNotifications = Object.values(data);\n                  for (let n of this.allNotifications) {\n                  n.date = formatDistanceToNow( new Date(n.date), {\n                    includeSeconds: true,\n                    addSuffix: false\n                  });\n                }\n                // Track if No Notifications\n                if (this.allNotifications.length <= 0 || this.allNotifications === []) {\n                  this.noNotifications = true;\n                } else {\n                  this.noNotifications = false;\n                  this.clearedToast();\n                }\n              });\n\n                // TODO: replaces 'minutes' with M\n                // let minutes = ;\n              }\n          );\n      }\n    );\n  }\n  async clearedToast() {\n    const toast = await this.toast.create({\n      message: 'Cleared Notifications.',\n      cssClass: 'danger-toast',\n      duration: 2000\n    });\n    await toast.present();\n  }\n  back() {\n    this.router.navigateByUrl('home/posts');\n  }\n  goTo() {\n    console.log('Going to page from notification');\n  }\n  async deleteSwipe(e, notiID) {\n    console.log(e)\n    if(!e) {\n      throw Error('No Swipe Event returned.')\n    } else {\n      console.log('Delete Swipe ... ');\n      await this.deleteNotification(notiID);\n      await this.deletedToast();\n    }\n  }\n  deleteNotification(notiID) {\n    this.notifications.deleteNotification(this.userEmail, notiID).subscribe(\n      data => {\n        console.log(data)\n        this.allNotifications = Object.values(data);;\n        for (let n of this.allNotifications) {\n          n.date = formatDistanceToNow( new Date(n.date), {\n            includeSeconds: true,\n            addSuffix: false\n          });\n          console.log(this.allNotifications)\n        }\n        // Track if No Notifications\n        if (this.allNotifications.length <= 0 || this.allNotifications === []) {\n          this.noNotifications = true;\n        } else {\n          this.noNotifications = false;\n        }\n      });\n  }\n  async deletedToast() {\n    const toast = await this.toast.create({\n      message: 'Deleted.',\n      cssClass: 'danger-toast',\n      duration: 2000\n    });\n    toast.present();\n  }\n}\n","export default \" <!-- Mobile Toolbar -->\\n <ion-header class=\\\"ion-hide-lg-up\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n      <ion-title>Notifications</ion-title>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button id=\\\"clear-button\\\" (click)=\\\"clear()\\\">\\n        Clear\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n\\n  <!-- No Messages -->\\n  <ion-row *ngIf=\\\"noNotifications\\\" class=\\\"ion-justify-content-center\\\">\\n    <ion-col class=\\\"margin-top ion-text-center\\\" size-xs=\\\"12\\\" size-sm=\\\"12\\\" size-md=\\\"10\\\" size-lg=\\\"8\\\" size-xl=\\\"6\\\">\\n      <h3 id=\\\"no-notifications\\\">You have no notifications</h3>\\n      <img id=\\\"icon\\\" src=\\\"../../../../assets/icons/no-notifications-icon.svg\\\" alt=\\\"\\\">\\n    </ion-col>\\n  </ion-row>\\n\\n  <ion-row *ngIf=\\\"!noNotifications\\\" class=\\\"ion-justify-content-center\\\">\\n    <ion-col size-xs=\\\"12\\\" size-sm=\\\"10\\\" size-md=\\\"10\\\" size-lg=\\\"8\\\" size-xl=\\\"6\\\">\\n      <!-- List of Sliding Items -->\\n      <ion-list>\\n        <ion-item-sliding (click)=\\\"goTo()\\\" *ngFor=\\\"let n of allNotifications\\\">\\n          <ion-item lines=\\\"none\\\">\\n            <ion-avatar>\\n              <img [src]=\\\"n.instigatingUserProfilePicture\\\" />\\n            </ion-avatar>\\n            <p id=\\\"message\\\">{{n.message}}</p>\\n            <p id=\\\"date\\\">{{n.date}}</p>\\n          </ion-item>\\n          <ion-item-options (ionSwipe)=\\\"deleteSwipe($event, n.notiID)\\\" side=\\\"end\\\">\\n            <ion-item-option  id=\\\"delete-noti\\\">Slide left to Delete</ion-item-option>\\n          </ion-item-options>\\n        </ion-item-sliding>\\n      </ion-list>\\n    </ion-col>\\n  </ion-row>\\n\\n\\n\\n</ion-content>\\n\";"],"names":[],"sourceRoot":"webpack:///"}