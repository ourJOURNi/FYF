(self.webpackChunkfind_you_future_app=self.webpackChunkfind_you_future_app||[]).push([[1055],{78520:function(t,e,n){"use strict";n.d(e,{_:function(){return p}});var i=n(64762),o=n(17238),s=n(80106),r=n(39181),a=n(88720),g=n(9193),c=n(19039),l=n(21382),h=n(38583);function d(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"ion-button",10),a.NdJ("click",function(){a.CHM(t);const e=a.oxw();return e.toggleGoingState(e.event)}),a._uU(1," Go "),a.qZA()}}function u(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"ion-button",11),a.NdJ("click",function(){a.CHM(t);const e=a.oxw();return e.toggleGoingState(e.event)}),a._uU(1," Cancel "),a.qZA()}}function v(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"ion-button",12),a.NdJ("click",function(){a.CHM(t);const e=a.oxw();return e.toggleGoingState(e.event)}),a._uU(1," Go "),a.qZA()}}function f(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"ion-button",13),a.NdJ("click",function(){a.CHM(t);const e=a.oxw();return e.toggleGoingState(e.event)}),a._uU(1," Cancel "),a.qZA()}}let p=(()=>{class t{constructor(t,e,n,i,o){this.events=t,this.eventsEventEmitterService=e,this.toast=n,this.router=i,this.profile=o,this.going=!1,this.goingState="not-going",this.iconName="add-circle-outline"}ngOnInit(){this.profile.getUserDetails().subscribe(t=>{this.userEmail=t.email,t.eventsGoing.includes(this.event._id)?(this.going=!0,this.goingState="going"):(this.going=!1,this.goingState="not-going")})}toggleGoingState(t){"not-going"===this.goingState?(this.goingState="going",this.iconName="close-circle-outline",this.going=!0,this.goingToast(),console.log(`Going to event, ${t.title}`),this.events.goingToEvent(t._id,this.userEmail,this.id).subscribe(t=>{let e=[...Object.values(t.eventsGoing),this.event._id];this.events.eventsGoing$.next(e),console.log(this.events.eventsGoing$.getValue())})):(this.goingState="not-going",this.iconName="add-circle-outline",this.going=!1,this.notGoingToast(),console.log("No longer going to Event"),this.events.notGoingToEvent(t._id,this.userEmail,this.id).subscribe(t=>{const e=this.events.eventsGoing$.getValue();for(let n=0;n<e.length;n++)e[n]===this.event._id&&e.splice(n,1);console.log(e),this.events.eventsGoing$.next(e)}))}goingToast(){return(0,i.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:"You are going to this event.",duration:2e3})).present()})}notGoingToast(){return(0,i.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:"You are no longer going to this event.",duration:2e3})).present()})}eventPage(t){this.router.navigate(["/home/events/events-page",t._id,t.title,t.addressOne,t.addressOne,t.city,t.state,t.zip,t.dateCreated,t.date,t.time,t.photo,t.description])}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.n),a.Y36(g.d),a.Y36(c.yF),a.Y36(l.F0),a.Y36(r.H))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-going-icon"]],inputs:{event:"event",userEmail:"userEmail",id:"id"},decls:14,vars:4,consts:[[1,"ion-hide-lg-down","ion-justify-content-center"],["size","5",2,"height","20px"],[1,"grey-button",3,"click"],["class","going",3,"click",4,"ngIf"],["class","not-going",3,"click",4,"ngIf"],[1,"ion-hide-lg-up","ion-justify-content-center",2,"margin-top","24px"],["size","11"],[1,"grey-button-mobile",3,"click"],["class","going-mobile",3,"click",4,"ngIf"],["class","not-going-mobile",3,"click",4,"ngIf"],[1,"going",3,"click"],[1,"not-going",3,"click"],[1,"going-mobile",3,"click"],[1,"not-going-mobile",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"ion-grid"),a.TgZ(1,"ion-row",0),a.TgZ(2,"ion-col",1),a.TgZ(3,"ion-button",2),a.NdJ("click",function(){return e.eventPage(e.event)}),a._uU(4," Details "),a.qZA(),a.qZA(),a.TgZ(5,"ion-col",1),a.YNc(6,d,2,0,"ion-button",3),a.YNc(7,u,2,0,"ion-button",4),a.qZA(),a.qZA(),a.TgZ(8,"ion-row",5),a.TgZ(9,"ion-col",6),a.TgZ(10,"ion-button",7),a.NdJ("click",function(){return e.eventPage(e.event)}),a._uU(11," Details "),a.qZA(),a.YNc(12,v,2,0,"ion-button",8),a.YNc(13,f,2,0,"ion-button",9),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(6),a.Q6J("ngIf",!e.going),a.xp6(1),a.Q6J("ngIf",e.going),a.xp6(5),a.Q6J("ngIf",!e.going),a.xp6(1),a.Q6J("ngIf",e.going))},directives:[c.jY,c.Nd,c.wI,c.YG,h.O5],styles:["p[_ngcontent-%COMP%]{transition:.5s;opacity:1}ion-button[_ngcontent-%COMP%]{font-size:1em;font-weight:800;height:20px;width:100px;margin-left:0;margin-right:10px;display:inline}.not-going[_ngcontent-%COMP%]{--color:#fff;font-size:.65em;--background:linear-gradient(#faa71b,#e99b14)}.grey-button[_ngcontent-%COMP%]{margin-right:10px;--background:#222;--color:#edf3f8;font-size:.65em}.going[_ngcontent-%COMP%]{--color:#fff;font-size:.65em;--background:#24d8a8;--background-hover:#24d8a8}.not-going-mobile[_ngcontent-%COMP%]{--color:#fff;--background:linear-gradient(#faa71b,#e99b14)}.grey-button-mobile[_ngcontent-%COMP%], .not-going-mobile[_ngcontent-%COMP%]{display:block;width:100%;height:40px;font-size:1em}.grey-button-mobile[_ngcontent-%COMP%]{margin-right:10px;--background:#0055a5;--color:#edf3f8;top:-8px;position:relative}.going-mobile[_ngcontent-%COMP%]{--color:#fff;display:block;width:100%;height:40px;font-size:1em;--background:#24d8a8;--background-hover:#24d8a8}"],data:{animation:[(0,o.X$)("going",[(0,o.SB)("going",(0,o.oB)({color:"blue",opacity:"0.4",transition:"0.5s",transform:"scale(0.9)"})),(0,o.SB)("not-going",(0,o.oB)({color:"#21ce99",opacity:"1",transition:"0.5s",transform:"scale(1)"})),(0,o.eR)("not-going <=> going",(0,o.jt)("100ms ease-out"))])]}}),t})()},9193:function(t,e,n){"use strict";n.d(e,{d:function(){return o}});var i=n(88720);let o=(()=>{class t{constructor(){this.invokeEventsPageRefresh=new i.vpe}onBackAction(){this.invokeEventsPageRefresh.emit()}resetEvents(){console.log("Reseting Events Page"),this.invokeEventsPageRefresh.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},71055:function(t,e,n){"use strict";n.r(e),n.d(e,{EventsPageModule:function(){return C}});var i=n(38583),o=n(90665),s=n(21382),r=n(64941),a=n(19039),g=n(64762),c=n(45435),l=n(80106),h=n(79778),d=n(20445),u=n(39181),v=n(94513),f=n(43463);function p(t,e){(0,f.Z)(2,arguments);var n=(0,v.Z)(t),i=(0,v.Z)(e);return n.getTime()>i.getTime()}var m=n(88720),b=n(9193),E=n(78520);function Z(t,e){if(1&t&&(m.TgZ(0,"ion-col",15),m.TgZ(1,"ion-card",16),m._UZ(2,"img",17),m.TgZ(3,"ion-card-header"),m.TgZ(4,"ion-card-title"),m._uU(5),m.qZA(),m.TgZ(6,"ion-card-subtitle"),m._uU(7),m.qZA(),m.TgZ(8,"ion-card-subtitle"),m._uU(9),m.qZA(),m.qZA(),m.TgZ(10,"ion-card-content",18),m.TgZ(11,"ion-toolbar",19),m._UZ(12,"app-going-icon",20),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){const t=e.$implicit,n=m.oxw();m.xp6(2),m.s9C("src",t.photo,m.LSH),m.xp6(3),m.Oqu(t.title),m.xp6(2),m.Oqu(t.time),m.xp6(2),m.Oqu(t.date),m.xp6(3),m.Q6J("event",t)("userEmail",n.userEmail)("id",n.id)}}let _=(()=>{class t{constructor(t,e,n,i,o){this.router=t,this.events=e,this.profile=n,this.loading=i,this.eventEmitterService=o,this.searching=!1,this.noSearchInput=!1}ngOnInit(){this.deleteEvent(),this.trackRoute(),null==this.eventEmitterService.subsVar&&(this.eventEmitterService.subsVar=this.eventEmitterService.invokeEventsPageRefresh.subscribe(()=>{this.getEvents()})),this.profileSub=this.profile.getUserDetails().subscribe(t=>{this.id=t._id,this.userEmail=t.email,this.events.eventsGoing$.next(t.eventsGoing),this.eventsGoingSub=this.events.eventsGoing$.subscribe(t=>{console.log(t.length),this.eventsGoingLength=t.length}),console.log("User id: "+this.id),console.log("User email: "+this.userEmail)}),this.eventsGoing=this.events.getEvents().subscribe(t=>{this.allEvents=Object.values(t),this.allEventsLength=this.allEvents.length,this.allEvents.reverse(),console.log(this.allEvents),this.loadedAllEvents=Object.values(t),this.loadedAllEvents.reverse();for(const e of this.allEvents)p(new Date(Date.now()),new Date(e.date))&&(this.deleteEventSub=this.events.deleteEvent(e._id).subscribe()),e.date=(0,h.Z)(new Date(e.date),"MMMM dd, yyyy"),e.time=(0,h.Z)(new Date(e.date),"hh:mm a"),e.dateCreated=(0,d.Z)(new Date(e.dateCreated),{includeSeconds:!0,addSuffix:!0})})}trackRoute(){this.routerSub=this.router.events.pipe((0,c.h)(t=>t instanceof s.m2)).subscribe(t=>{if(console.log(t.url),t.url.includes("/home/events/event-page/")){console.log("Hide Tab Bar!");let t=document.getElementById("tabBar");t.style.height="0px",t.style.transition="1s"}else{let t=document.getElementById("tabBar");console.log(t),t.style.height="50px",t.style.transition="1s"}})}deleteEvent(){var t=p(new Date(1989,6,10),new Date(1987,1,11));console.log(t)}eventPage(t){this.router.navigate(["/home/events/events-page",t._id,t.title,t.addressOne,t.addressOne,t.city,t.state,t.zip,t.dateCreated,t.date,t.time,t.photo,t.description])}myEvents(){this.router.navigate(["/home/events/going"])}filter(t){this.initializeItems();let e=t.detail.value;this.presentLoadingWithOptions(),this.allEvents=this.allEvents.filter(t=>{if(console.log(t),t&&e||(console.log("No results from that search"),this.noSearchInput=!0),t.title&&e)return t.title.toLowerCase().indexOf(e.toLowerCase())>-1&&(console.log(t.title),console.log(t),this.searchTerm=e,this.searching=!0,this.noSearchInput=!1,!0);this.noSearchInput=!0}),this.allEventsLength=this.allEvents.length,0===this.allEventsLength&&(console.log("No results from that search"),this.searching=!0,this.searchTerm=e,this.searchbar.getInputElement().then(t=>{t.value=""}),this.noSearchInput=!0),e||(console.log("Search term is empty; showing all events instead"),this.noSearchInput=!1,this.searching=!1,this.getEvents())}initializeItems(){this.allEvents=this.loadedAllEvents}presentLoadingWithOptions(){return(0,g.mG)(this,void 0,void 0,function*(){const t=yield this.loading.create({duration:1e3,message:"Searching for Events...",translucent:!0,cssClass:"custom-class custom-loading",keyboardClose:!1});return yield t.present()})}doRefresh(t){return(0,g.mG)(this,void 0,void 0,function*(){this.allEvents=[],this.eventsSub=this.events.getEvents().subscribe(t=>{this.allEvents=Object.values(t),this.allEventsLength=this.allEvents.length,this.allEvents.reverse(),this.searching=!1;for(const e of this.allEvents)p(new Date(Date.now()),new Date(e.date))&&(this.deleteEventSub=this.events.deleteEvent(e._id).subscribe()),e.date=(0,h.Z)(new Date(e.date),"MMMM dd, yyyy"),e.dateCreated=(0,d.Z)(new Date(e.dateCreated),{includeSeconds:!0,addSuffix:!0}),e.time=(0,h.Z)(new Date(e.date),"hh:mm a")}),setTimeout(()=>{t.target.complete(),console.log("Events Refreshed")},2e3),yield console.log("Refreshing Events Page..")})}getEvents(){return(0,g.mG)(this,void 0,void 0,function*(){this.eventsSub=this.events.getEvents().subscribe(t=>{this.allEvents=Object.values(t),this.allEventsLength=this.allEvents.length,this.allEvents.reverse(),this.searching=!1;for(const e of this.allEvents)e.date=(0,h.Z)(new Date(e.date),"MMMM dd, yyyy"),e.dateCreated=(0,d.Z)(new Date(e.dateCreated),{includeSeconds:!0,addSuffix:!0}),e.time=(0,h.Z)(new Date(e.date),"hh:mm a")})})}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(s.F0),m.Y36(l.n),m.Y36(u.H),m.Y36(a.HT),m.Y36(b.d))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-events"]],viewQuery:function(t,e){if(1&t&&m.Gf(a.VI,5),2&t){let t;m.iGM(t=m.CRH())&&(e.searchbar=t.first)}},decls:25,vars:1,consts:[[1,"ion-hide-lg-up"],["color","light","name","calendar-outline",2,"position","relative","left","24px"],["slot","end"],[2,"width","100px","--background","#faa71b","font-weight","600",3,"click"],["slot","fixed",3,"ionRefresh"],[1,"ion-hide-lg-down","ion-justify-content-center",2,"padding-top","80px","margin-bottom","40px"],["size-xs","11","size-sm","10","size-md","10","size-lg","8","size-xl","6"],[1,"desktop-toolbar"],["slot","start"],["height","50","src","../../../assets/icon/my-events-icon.svg","alt","","srcset",""],[1,"my-events-button",3,"click"],[1,"ion-justify-content-center"],[1,"spacer","ion-hide-lg-down"],["size-xs","12","size-sm","10","size-md","10","size-lg","8","size-xl","8"],["size-xs","12","size-sm","10","size-md","8","size-lg","3","size-xl","3",4,"ngFor","ngForOf"],["size-xs","12","size-sm","10","size-md","8","size-lg","3","size-xl","3"],[1,"event-card"],[3,"src"],[1,"ion-text-center"],[2,"--background","none","height","auto"],[3,"event","userEmail","id"]],template:function(t,e){1&t&&(m.TgZ(0,"ion-header",0),m.TgZ(1,"ion-toolbar"),m._UZ(2,"ion-icon",1),m.TgZ(3,"ion-buttons",2),m.TgZ(4,"ion-button",3),m.NdJ("click",function(){return e.myEvents()}),m._uU(5," My Events "),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(6,"ion-content"),m.TgZ(7,"ion-refresher",4),m.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),m._UZ(8,"ion-refresher-content"),m.qZA(),m.TgZ(9,"ion-grid"),m.TgZ(10,"ion-row",5),m.TgZ(11,"ion-col",6),m.TgZ(12,"ion-toolbar",7),m.TgZ(13,"ion-buttons",8),m._UZ(14,"img",9),m.TgZ(15,"h1"),m._uU(16,"Events"),m.qZA(),m.qZA(),m.TgZ(17,"ion-buttons",2),m.TgZ(18,"ion-button",10),m.NdJ("click",function(){return e.myEvents()}),m._uU(19," My Events "),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(20,"ion-row",11),m._UZ(21,"div",12),m.TgZ(22,"ion-col",13),m.TgZ(23,"ion-row",11),m.YNc(24,Z,13,7,"ion-col",14),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(24),m.Q6J("ngForOf",e.allEvents))},directives:[a.Gu,a.sr,a.gu,a.Sm,a.YG,a.W2,a.nJ,a.Wo,a.jY,a.Nd,a.wI,i.sg,a.PM,a.Zi,a.gZ,a.tO,a.FN,E._],styles:["ion-header[_ngcontent-%COMP%]{box-shadow:1px 1px 5px rgba(0,0,0,.1)}ion-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2em}ion-card[_ngcontent-%COMP%]{--background:#fff;margin:0 0 50px;position:relative;padding-bottom:32px;box-shadow:1px 10px 10px rgba(0,0,0,.1)}ion-searchbar[_ngcontent-%COMP%]{--background:#fff;margin-left:10px;border-radius:5px;--height:30px;width:95%;font-size:.8em;--box-shadow:none;--cancel-button-color:#005191;--clear-button-color:#005191;--placeholder-opacity:0.5;--icon-color:#005191;transition:.5s}.job-section[_ngcontent-%COMP%]{height:230px;color:#777;position:relative;top:20px;width:100%}h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{display:block}h6.text-header[_ngcontent-%COMP%]{padding:unset;text-align:center}--ion-buttons[_ngcontent-%COMP%]{--color:#888}ion-button[_ngcontent-%COMP%]{--background:none}ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2.5em}.desktop-toolbar[_ngcontent-%COMP%]{--background:none;padding-bottom:16px;border-bottom:1px solid #33333326}.desktop-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0055a5;position:relative;left:8px}.my-events-button[_ngcontent-%COMP%]{--color:#fff;--background:#e3405f;--background-hover:linear-gradient(#e3405f,#5f4045);height:24px;width:100px;font-size:.5em;font-weight:600;display:block}ion-card-title[_ngcontent-%COMP%]{font-size:1em;font-weight:600;color:#0055a5}ion-card-subtitle[_ngcontent-%COMP%]{font-size:1em}"]}),t})();const x=[{path:"",component:_},{path:"events-page/:id/:title/:addressOne/:addressTwo/:city/:state/:zip/:dateCreated/:date/:time/:photo/:description",loadChildren:()=>n.e(6649).then(n.bind(n,76649)).then(t=>t.EventsPagePageModule)},{path:"going",loadChildren:()=>n.e(3060).then(n.bind(n,73060)).then(t=>t.GoingPageModule)}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[s.Bz.forChild(x)],s.Bz]}),t})(),C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[r.c,i.ez,o.u5,a.Pc,y,s.Bz.forChild([{path:"",component:_}])]]}),t})()},80106:function(t,e,n){"use strict";n.d(e,{n:function(){return g}});var i=n(92340),o=n(26215),s=n(39181),r=n(88720),a=n(91841);let g=(()=>{class t{constructor(t,e){this.http=t,this.profile=e,this.eventsGoing$=new o.X([]),this.BACKEND_URL=i.N.url}getEvents(){return console.log("Getting Events"),this.http.get(`${this.BACKEND_URL}/api/events`)}getEventsGoing(t){return this.http.post(`${this.BACKEND_URL}/api/events/events-going`,{_id:t})}goingToEvent(t,e,n){return console.log(this.profile),this.http.post(`${this.BACKEND_URL}/api/events/go-to-event`,{eventID:t,userEmail:e,id:n})}notGoingToEvent(t,e,n){return this.http.post(`${this.BACKEND_URL}/api/events/dont-go-to-event`,{userEmail:e,eventID:t,id:n})}deleteEvent(t){return this.http.post(`${this.BACKEND_URL}/api/events/delete-event`,{_id:t})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a.eN),r.LFG(s.H))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);