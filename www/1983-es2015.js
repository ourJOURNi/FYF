(self.webpackChunkfind_you_future_app=self.webpackChunkfind_you_future_app||[]).push([[1983],{81983:function(e,t,n){"use strict";n.r(t),n.d(t,{StudentChatPageModule:function(){return b}});var s=n(38583),i=n(90665),o=n(19039),a=n(21382),r=n(64762),c=n(50420),l=n(39181),u=n(20445),g=n(88720),p=n(70009);function d(e,t){1&e&&(g.TgZ(0,"div",9),g.TgZ(1,"p"),g._uU(2,"You have "),g.TgZ(3,"b"),g._uU(4,"no messages"),g.qZA(),g._uU(5," in your inbox. Please press the "),g._UZ(6,"ion-icon",10),g._uU(7," button to create a new message. "),g.qZA(),g.qZA())}function h(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"ion-item-sliding",4),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw().chatPage(t.chatId)}),g.TgZ(1,"ion-item",11),g.TgZ(2,"ion-avatar",1),g._UZ(3,"img",12),g.qZA(),g.TgZ(4,"ion-label"),g.TgZ(5,"h2"),g._uU(6),g.TgZ(7,"span",13),g._uU(8),g.qZA(),g.qZA(),g.TgZ(9,"p"),g._uU(10),g.qZA(),g.qZA(),g.qZA(),g._UZ(11,"ion-item-options",14),g.qZA()}if(2&e){const e=t.$implicit;g.xp6(3),g.s9C("src",e.isUser?e.respondingUserPhoto:e.requestingUserPhoto,g.LSH),g.xp6(3),g.hij("",e.isUser?e.respondingUserFullname:e.requestingUserFullname," "),g.xp6(2),g.hij("\xb7 ",e.lastMessageTime,""),g.xp6(2),g.Oqu(e.lastMessageText)}}const m=[{path:"",component:(()=>{class e{constructor(e,t,n,s){this.router=e,this.modal=t,this.studentChat=n,this.profile=s}ngOnInit(){this.profile.getUserDetails().subscribe(e=>{this.fullName=e.fullName,this.profilePicture=e.profilePicture,this.email=e.email,this.studentChat.conversations$.subscribe(e=>{this.conversations=Object.values(e).reverse();for(let t of this.conversations){for(const e of t.messages)e.date=(0,u.Z)(new Date(e.date));t.requestingUserEmail===this.email&&(t.isUser=!0),t.lastMessage=t.messages.slice(-1)[0],t.lastMessageText=t.lastMessage.text,t.lastMessageTime=t.lastMessage.date}})})}chatPage(e){this.router.navigate(["home/posts/student-chat/chat-page",e,this.fullName,this.profilePicture,this.email])}newMessage(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.modal.create({component:c.K,componentProps:{}});yield e.present()})}delete(e){}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(a.F0),g.Y36(o.IN),g.Y36(p.U),g.Y36(l.H))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-student-chat"]],decls:15,vars:2,consts:[[1,"ion-hide-lg-up"],["slot","start"],[1,"toolbar-title"],["slot","end"],[3,"click"],["size","large","name","create",1,"new-message"],[1,"searchbar-wrapper","ion-hide-lg-up"],["id","no-messages","class","ion-text-center","style","margin-top: 75px; padding: 15px;",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["id","no-messages",1,"ion-text-center",2,"margin-top","75px","padding","15px"],["size","small","name","create",1,"new-message"],[1,"unread"],[3,"src"],[1,"date-sent"],["side","end"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-header",0),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",1),g._UZ(3,"ion-back-button"),g.TgZ(4,"p",2),g._uU(5,"Student Chat"),g.qZA(),g.qZA(),g.TgZ(6,"ion-buttons",3),g.TgZ(7,"ion-button",4),g.NdJ("click",function(){return t.newMessage()}),g._UZ(8,"ion-icon",5),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(9,"ion-content"),g.TgZ(10,"ion-toolbar",6),g._UZ(11,"ion-searchbar"),g.qZA(),g.TgZ(12,"ion-list",0),g.YNc(13,d,8,0,"div",7),g.YNc(14,h,12,4,"ion-item-sliding",8),g.qZA(),g.qZA()),2&e&&(g.xp6(13),g.Q6J("ngIf",0==t.conversations),g.xp6(1),g.Q6J("ngForOf",t.conversations))},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,o.YG,o.gu,o.W2,o.VI,o.j9,o.q_,s.O5,s.sg,o.td,o.Ie,o.BJ,o.Q$,o.IK],styles:[".new-message[_ngcontent-%COMP%]{color:#faa71b}ion-label[_ngcontent-%COMP%]{font-weight:800;display:block}.searchbar-wrapper[_ngcontent-%COMP%]{margin:20px 0}.unread[_ngcontent-%COMP%]{--background:#cbd7e6}.date-sent[_ngcontent-%COMP%]{font-size:.8em;opacity:.5}"]}),e})()},{path:"chat-page/:chatId/:fullName/:profilePicture/:email",loadChildren:()=>Promise.all([n.e(8592),n.e(9133)]).then(n.bind(n,39133)).then(e=>e.ChatPagePageModule)}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[a.Bz.forChild(m)],a.Bz]}),e})();var f=n(62403);let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[s.ez,i.u5,o.Pc,Z,f.NewMessageStudentPageModule]]}),e})()}}]);